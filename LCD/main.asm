.INCLUDE "m328Pdef.inc"

	LDI	R16,	LOW(RAMEND)
	OUT	SPL,	R16
	LDI	R16,	HIGH(RAMEND)
	OUT	SPH,	R16

	LDI 	R16,	0x00
	LDI	R17,	0xFF

	OUT	DDRD,	R17;WRITE
	OUT	DDRC,	R17;WRITE
	OUT	DDRB,	R16;READ

	CALL	SETCMD;COMMAND MODE
LOOP:
	CALL	DELAY	
	LDI	R16,	0x0F;DISPLAY ON
	LDI	R17,	0x01;CLEAR DISPLAY
	LDI	R18,	0x02;RETURN HOME
	LDI	R19,	0x06;MOVE RIGHT
	OUT	PORTD,	R16
	CALL	DELAY
	OUT	PORTD,	R17
	CALL	DELAY
	OUT	PORTD,	R18
	CALL	DELAY
	OUT	PORTD,	R19
	CALL	DELAY
	SLEEP
	RJMP	LOOP

SETCMD:;COMMAND MODE
	CBI	PORTC,	0;RS
	CBI	PORTC,	1;RW
	RET

SETREAD:;READ MODE
	SBI	PORTC,	0;RS
	SBI	PORTC,	1;RW
	RET

SETWRITE:;WRITEMODE
	SBI	PORTC,	0;RS
	CBI	PORTC,	1;RW
	RET
DELAY:
	LDI	R20,	0XFF
	LDI	R21,	0XFF
T1:	
	NOP
	NOP
	NOP
	DEC	R20
	BRNE	T1
	DEC	R21
	BRNE	T1
	RET

